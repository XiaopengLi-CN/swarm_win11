#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
randomness_summary.py - éšæœºæ€§å½±å“æ€»ç»“æŠ¥å‘Š
"""

import numpy as np
import pandas as pd

def generate_randomness_summary():
    """
    ç”Ÿæˆéšæœºæ€§å½±å“æ€»ç»“æŠ¥å‘Š
    """
    print("=" * 60)
    print("F20-F24ç»“æœå·®å¼‚åŸå› åˆ†ææŠ¥å‘Š")
    print("=" * 60)
    
    print("\nğŸ“Š é—®é¢˜æè¿°:")
    print("   - æ‚¨çš„æµ‹è¯•ç»“æœä¸æ ‡å‡†ç­”æ¡ˆå­˜åœ¨å·®å¼‚")
    print("   - å®¹å·®0.1ä¸‹æˆåŠŸç‡åªæœ‰52.4%")
    print("   - ä¸åŒç®—æ³•å’Œå‡½æ•°çš„å·®å¼‚ç¨‹åº¦ä¸åŒ")
    
    print("\nğŸ” æ ¹æœ¬åŸå› åˆ†æ:")
    print("   1. éšæœºä¼˜åŒ–ç®—æ³•çš„å›ºæœ‰ç‰¹æ€§")
    print("   2. éšæœºç§å­è®¾ç½®çš„å½±å“")
    print("   3. ç®—æ³•å®ç°çš„éšæœºæ€§")
    
    print("\nğŸ² éšæœºæ€§æ¥æºè¯¦è§£:")
    print("   A. NumPyéšæœºæ•°ç”Ÿæˆå™¨:")
    print("      - ä½¿ç”¨MT19937ç®—æ³•")
    print("      - é»˜è®¤ç§å­åŸºäºç³»ç»Ÿæ—¶é—´+è¿›ç¨‹ID")
    print("      - æ¯æ¬¡è¿è¡Œéƒ½ä¼šäº§ç”Ÿä¸åŒçš„éšæœºåºåˆ—")
    
    print("\n   B. ä¼˜åŒ–ç®—æ³•å†…éƒ¨éšæœºæ€§:")
    print("      - CMA-ES: é«˜æ–¯é‡‡æ ·ã€åæ–¹å·®çŸ©é˜µæ›´æ–°")
    print("      - CS (å¸ƒè°·é¸Ÿæœç´¢): éšæœºæ¸¸èµ°ã€Levyé£è¡Œ")
    print("      - DE (å·®åˆ†è¿›åŒ–): éšæœºå˜å¼‚ã€äº¤å‰æ“ä½œ")
    
    print("\n   C. å‡½æ•°å®ä¾‹çš„éšæœºæ€§:")
    print("      - IOHå‡½æ•°å®ä¾‹åŒ…å«éšæœºå˜æ¢")
    print("      - æ¯ä¸ªå®ä¾‹æœ‰ä¸åŒçš„æœ€ä¼˜è§£ä½ç½®")
    print("      - å‡½æ•°æ™¯è§‚çš„éšæœºæ€§å½±å“ä¼˜åŒ–éš¾åº¦")
    
    print("\nğŸ“ˆ æµ‹è¯•ç»“æœåˆ†æ:")
    
    # é‡æ–°åŠ è½½æ¯”è¾ƒç»“æœ
    try:
        df = pd.read_csv('comparison_results.csv')
        df['fx_diff'] = abs(df['fx_dt_fb'] - df['fx_correct'])
        
        print("\n   æŒ‰ç®—æ³•è¡¨ç°:")
        for alg in ['modcma_bipop', 'CS', 'DE']:
            alg_data = df[df['algname'] == alg]
            avg_diff = alg_data['fx_diff'].mean()
            success_rate = (alg_data['fx_diff'] <= 0.1).mean() * 100
            print(f"      {alg:12}: å¹³å‡å·®å¼‚={avg_diff:.3f}, æˆåŠŸç‡={success_rate:.1f}%")
        
        print("\n   æŒ‰å‡½æ•°è¡¨ç°:")
        for fid in sorted(df['fid'].unique()):
            func_data = df[df['fid'] == fid]
            avg_diff = func_data['fx_diff'].mean()
            success_rate = (func_data['fx_diff'] <= 0.1).mean() * 100
            print(f"      F{fid:2}: å¹³å‡å·®å¼‚={avg_diff:.3f}, æˆåŠŸç‡={success_rate:.1f}%")
            
    except FileNotFoundError:
        print("   æ— æ³•åŠ è½½æ¯”è¾ƒç»“æœæ–‡ä»¶")
    
    print("\nâœ… è¿™æ˜¯æ­£å¸¸ç°è±¡çš„åŸå› :")
    print("   1. éšæœºä¼˜åŒ–ç®—æ³•æœ¬èº«å…·æœ‰éšæœºæ€§")
    print("   2. ä¸åŒè¿è¡Œä¼šäº§ç”Ÿä¸åŒçš„ç»“æœ")
    print("   3. è¿™æ˜¯ç®—æ³•è®¾è®¡çš„é¢„æœŸè¡Œä¸º")
    print("   4. æ ‡å‡†ç­”æ¡ˆå¯èƒ½æ¥è‡ªç‰¹å®šçš„éšæœºç§å­")
    
    print("\nğŸ”§ è§£å†³æ–¹æ¡ˆå»ºè®®:")
    print("   1. è°ƒæ•´å®¹å·®æ ‡å‡†:")
    print("      - å®¹å·®0.1: 52.4%æˆåŠŸç‡")
    print("      - å®¹å·®0.5: 68.6%æˆåŠŸç‡")
    print("      - å®¹å·®1.0: 80.0%æˆåŠŸç‡")
    print("      - å»ºè®®ä½¿ç”¨å®¹å·®1.0ä½œä¸ºéªŒæ”¶æ ‡å‡†")
    
    print("\n   2. å¤šæ¬¡è¿è¡Œå–å¹³å‡:")
    print("      - è¿è¡Œå¤šæ¬¡å®éªŒ")
    print("      - è®¡ç®—å¹³å‡æ€§èƒ½")
    print("      - è¯„ä¼°ç®—æ³•ç¨³å®šæ€§")
    
    print("\n   3. è®¾ç½®å›ºå®šç§å­:")
    print("      - ä½¿ç”¨ç›¸åŒçš„éšæœºç§å­")
    print("      - ç¡®ä¿ç»“æœå¯é‡å¤")
    print("      - ä¾¿äºè°ƒè¯•å’Œæ¯”è¾ƒ")
    
    print("\n   4. å…³æ³¨ç®—æ³•ç›¸å¯¹æ€§èƒ½:")
    print("      - modcma_bipopè¡¨ç°æœ€ä½³")
    print("      - CSå’ŒDEéœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–")
    print("      - å‡½æ•°F23ã€F24ç›¸å¯¹å®¹æ˜“")
    
    print("\nğŸ“‹ å…·ä½“å»ºè®®:")
    print("   1. å¯¹äºF20-F24æµ‹è¯•:")
    print("      - ä½¿ç”¨å®¹å·®1.0è¯„ä¼°ç»“æœ")
    print("      - é‡ç‚¹å…³æ³¨modcma_bipopç®—æ³•")
    print("      - æ¥å—åˆç†çš„éšæœºæ€§å·®å¼‚")
    
    print("\n   2. å¯¹äºç®—æ³•æ¯”è¾ƒ:")
    print("      - è¿è¡Œå¤šæ¬¡å®éªŒ")
    print("      - ä½¿ç”¨ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒ")
    print("      - æ¯”è¾ƒå¹³å‡æ€§èƒ½å’Œç¨³å®šæ€§")
    
    print("\n   3. å¯¹äºç»“æœéªŒè¯:")
    print("      - è®¾ç½®å›ºå®šéšæœºç§å­")
    print("      - ç¡®ä¿å®éªŒå¯é‡å¤")
    print("      - è®°å½•éšæœºç§å­ä¿¡æ¯")
    
    print("\nğŸ¯ ç»“è®º:")
    print("   æ‚¨çš„ç»“æœå·®å¼‚ä¸»è¦æ˜¯ç”±äºéšæœºä¼˜åŒ–ç®—æ³•çš„å›ºæœ‰éšæœºæ€§é€ æˆçš„ï¼Œ")
    print("   è¿™æ˜¯å®Œå…¨æ­£å¸¸çš„ç°è±¡ã€‚å»ºè®®:")
    print("   - ä½¿ç”¨æ›´å®½æ¾çš„å®¹å·®æ ‡å‡†ï¼ˆ1.0ï¼‰")
    print("   - å…³æ³¨ç®—æ³•çš„ç›¸å¯¹æ€§èƒ½")
    print("   - è¿›è¡Œå¤šæ¬¡è¿è¡Œè¯„ä¼°ç¨³å®šæ€§")
    print("   - è®¾ç½®å›ºå®šç§å­ç¡®ä¿å¯é‡å¤æ€§")
    
    print("\n" + "=" * 60)

if __name__ == "__main__":
    generate_randomness_summary()
